### 2023 年 07/26(水)

## 勉強したこと(やったこと)

Rails の API 作成終了！！！(多分)

front と back 分けて開発して分かったのですが、API 作成中にこのようにフォーム作った方がいいよなあとか

front の recipe 登録のフォームで仕入れ先と原材料を別々で登録しようとしていたのですが

原材料と仕入れ先登録するボタン的なの作って、

ingredients#index で supplier を joins して表示させて選ばせた方が user もやりやすいと思いました！！

連携って大事だなってつくづくみにしみました。(一人ですけど。。。)

## わかったこと

コントローラがぶくぶく太ったので、DB に保存する処理をモデルに移動してる最中に疑問に思ったことがありました。

# なぜモデルに書くと nil を返す必要があるのか

### nil の意味とは

まず Ruby における nil とは何もないまたは、存在しないを示す特殊な値である。

今回僕の場合の nil は真を返すということは、レシピ手順が全部登録できたら error の方を nil になり

偽を返せば、エラーメッセージを返して保存されかけたレシピ手順は何も存在しない事になるすなわち nil になる

### では今回の疑問の主役

なぜコントローラだと nil を記述するのにモデルだと nil を記述するのか？

それは Ruby の言語からくる特性で ruby は`return`を記述しなくても戻り値を返してくれる

例えばこのメソッド

```ruby
def addition
	a = 1
	b = 1
	a + b
end
```

これは ruby の特性で return を書かなくても自動で 3 という戻り値が帰ります

次はこのメソッド

```ruby
def addition
	a = 1
	b = 1
end
```

これは何も返さないと思いきや実は nil を返してる。

単なる代入だけでこの操作自体は何も返さないからです！

したがって明示的に何も返さない(nil を返す)ことを示すためには`nil`を使うのが最もシンプルでわかりやすい方法です

ここで疑問点の解説に繋がる！

コントローラで`nil`が必要ないのはコントローラ内のアクションメソッドでは、明示的に return ではないですけども

実は`render`や`redirect_to`などを使って、返しているのです！！！

しかしモデル内のメソッドではそのようなレスポンスを返すということはないため、何も返さないことを明示するために nil を使った理由です！

**ビューにレスポンスを返すのはコントローラの責務ですからね！**

## 次やること

next と rails の連携！

ここからようやくアプリっぽくなる開発フェーズですね

## 感じたこと

最近 rails が楽しい

## 勉強時間

Today: 毎日 8 時間はやってます h

Total: 750h
