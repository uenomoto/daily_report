### 2023 年 07/21(金)

## 勉強したこと(やったこと)

JWT をクッキーに保存させ、HttpOnly 属性を付与することで XSS 攻撃対策してやろうとした

## わかったこと

ブラウザでトークンを保存できる場所は

- localStorage
- sessionStorage
- cookie
- inmemory

その中の Auth0 は inmemory で保存している

永続性を保つために HttpOnly 属性をつけ Cookie に保存はできたが、rails 側がクッキーに保存された JWT を読み取れなかった

調べてみると、rails 側はクッキーに保存された JWT を読み取るためには、

グレデンシャルを true にして front 側の API リクエストに withCredentials を true にする必要がある

丸一日かけてやってみましたができなかったので、諦めました。。。

## 次やること

rails の API を作って、ポストマンでテスト！

先に進まないとまずい。

## 感じたこと

一様 Recoil で状態管理していて普通の遷移では保持され認証はできるが

スーパーリロードすると状態がリセットされてしまう。。(悔しいい)

丸一日かけてできなかった時の虚無感がすごい。

## 勉強時間

Today: 13h

Total: 730h
