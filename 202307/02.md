### 2023 年 07/02~07/03

## 勉強したこと

ECS でのデプロイのやり方

めちゃくちゃ詰まりました。(ファーゲートはコンテナ内に入るのが難しく（サーバーレスのため）デバックが辛い)

## わかったこと

クラスター、タスク、サービスの３点セットの概念がよくわかりました

credentials.yml.enc は、暗号化されたファイルで、master.key で復号化できる

なんとその中に AWS のアクセスキーとシークレットキーも設定でき、本番環境の DB 周りの普段は.env に入れるやつら

db_name, db_user, db_password, db_host これらを全てこのファイルに入れておくことで暗号化もでき

めんどくさくなく設定できる気がします

vim で編集するときは、`EDITOR=vim rails credentials:edit`で編集できます確認は`rails credentials:show`でできる！

## 次やること

vercel でデプロイしたやつを繋げる

front,back 両方独自ドメインを取得して設定

ALB はコスト高いから嫌いでも ACM は ELB が必要なので使うしかない。

冗長化のためには、ALB を使うしかないので、使うしかない。

お金のこと考えないのならどんどん AWS のサービス試したいです w

## 感じたこと

デバックがしづらいしまだ API しかデプロイできていないので、まだまだです辛い ww

初めての ECS でしたが修羅場をくくり抜けたのか理解はできた

だがタスクに対してコンテナがたったの 1 つなので 2 つになった時のことを考えると眩暈がします

## 勉強時間

Today: 昨日からで 25 時間以上？h

Total: 613h
