### 2023 年 06/23(金)

## 取り組んだ課題

railsec サイト

チェックアウト機能

## わかったこと

新しい発見はなかったが、DB 設計急遽変更はサクサクできた。

クレジットカードテーブル作ってたがフォームのレイアウトの関係上諦めて請求住所先テーブルでひとまとめにした

一人のユーザーに対して複数の請求住所先を選べる感じ。(その請求住所先とセットでクレジットカードが保存されている)

本来はクレジットカード専用のテーブルは作った方が絶対いい。(実際の EC サイトは一つの請求先住所に対して複数のクレジットカードが選べるため)

---

配送先住所は一様テーブル作りました。一人のユーザーに対して複数の配送先が作れる感じ

これは知り合いや友達、家族のプレゼントとかに使う。(請求先住所は自分だけど送り先は違う住所的な)

## 次やること

レビューもらったら修正

## 感じたこと

請求住所先のフォームは user かと思ったが、submit ボタンが 1 つしかないしクレジットカードの情報も込み込みなので

とりあえず、請求住所先テーブルを作り user を外部キーにした。(サインアップは email と password のみ)

`accepts_nested_attributes_for`使いたくないし、`fields_for`使うとレコード消えるしで避けたいし`hidden_field`になるし(勉強不足)

クローンして別のリポジトリを作りリモート名変えて作業し、GitHub で管理してます。

---

めちゃくちゃ調子悪いけど、寝れなかったから少しだけでも作業。

まだ本調子ではないため安静にしてます。

## 勉強時間

Today: 1h

Total: 529h
