### 2023 年 05/01(月)

## 取り組んだ課題

Ruby on Rails5 速習実践ガイドを読む

## わかったこと

テストの書き方と Docker での RSpec のやり方。

FactoryBot をインストールすることでテスト用の DB にテストデータを入れることができる

テスト用の DB はテストするたびに作成され削除される。

---

テストケースを整理・分類する ↓

describe: 大枠のテスト対象(例: 一番外はコントローラごとに分けて 2 番目以降は画面ごとに分けるイメージです)

context: 状況や状況(例：login するなど)

テストケースを実行する ↓

before: 必ず最初に走る処理

it: 期待する動作を書く場所

そんな感じだと思いました。

---

routes.rb の構造化

- scope: URL 階層(:path),モジュール(:module),URL 名(:as)などオプションに指定することで

  ブロック内の定義にまとめて一定の制約をかける

- namespace: URL 階層、モジュール、URL パターン名に一括で一定の制約をかけます

  scope と違って一括なのでどれか 1 つだけ制約をかけることは不可能

- controller: コントローラを指定

整理整頓大事！なるべくコントローラごとに分けて記述すること！

セキュリティ関連

ストロングパラメータや CSRF 対策

インジェクション

- XSS: ユーザー入力をエスケープする
- SQL インジェクション: パラメータ化クエリを使う
- Ruby コードインジェクション: ユーザー入力をコード評価しない
- コマンドラインインジェクション: ユーザー入力をシェルコマンドに含めない

まとめると、ユーザー入力は常に信用せず、適切にエスケープまたは検証し、安全な API を使用すること!

## 次やること

## 感じたこと

本当に幅広く Rails のことが書いてあります。

Rails チュートリアルってそんなに難しいのかな？気になるところです！

## 勉強時間

Today: h

Total: 433h
