### 2023 年 06/15(木)

## 取り組んだ課題

RailsEC サイト作る

- レビューの修正

商品管理機能実装。

- 途中まで

## わかったこと

おかげさまでデプロイするには何が必要かとローカルでは必要ではないと区別ができました。

basic 認証は URL が admin がついている部分だけできるようにしましたが

何故か admin と pw と入力しても認証が通らず永遠に次に進まない不具合が起きる

Heroku で環境変数にしてるからのなのかな？直接記述するとできるから、恐らく Heroku の環境変数が悪さしてる。

`fields_for`で複数のモデルを一つのフォームで登録できるやり方がわかったのですがあと一歩のところでダメでした。。。

hidden_field になってしまう。。。

フォームは別々にします。

## 次やること

商品管理機能実装

## 感じたこと

詰まる時間が長い！

あともう少しでできるのですが肝心な CURD でバグが起きる編集画面に進んで何もせずに戻ると

子モデルのレコードが消えてしまうバグ。デスゲームの始まりです（終わらせたい）

`accepts_nested_attributes_for`関連づけしたモデルを一緒にデータ保存できるようになるのですがこれが悪さしているっぽいです。

accepts_nested_attributes_for 使わずに親モデルが保存したら子モデルも保存できるようにしたい！

~~Product モデルひとつにすればよかった。。。orz~~

## 勉強時間

Today: 11h

Total: 486h
